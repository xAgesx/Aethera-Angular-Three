<!-- Notification Popup -->

<div class="notification-container" *ngIf="mainService.notification().type"
    [class.show]="mainService.notification().type">
    <div class="notification-popup" [ngClass]="mainService.notification().type">
        <div class="notification-icon">
            <svg *ngIf="mainService.notification().type === 'success'" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            <svg *ngIf="mainService.notification().type === 'error'" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
        </div>
        <div class="notification-content">
            <p class="notification-message">{{ mainService.notification().message }}</p>
        </div>
        <button class="notification-close">&times;</button>
        <div class="notification-progress"></div>
    </div>
</div>



<div class="auth-container">
  <div class="auth-card">
    <button class="back-btn" (click)="redirect('/landing')">← Back</button>

    <h1 class="auth-title">{{ isLogin ? 'Welcome Back' : 'Create Your Account' }}</h1>
    <p class="auth-subtitle">
      {{ isLogin ? 'Login to continue your learning journey' : 'Join Aethera and start exploring knowledge' }}
    </p>

    <form (ngSubmit)="onSubmit(authForm)" #authForm="ngForm" class="auth-form">
      <div class="form-group">
        <label>Email</label>
        <input type="email" name="email" ngModel required placeholder="you@example.com"
          (change)="verifForm(authForm)" />
      </div>

      <div class="form-group">
        <label>Password</label>
        <input [type]="passwordVisible ? 'text' : 'password'" name="password" ngModel required placeholder="••••••••"
          (change)="verifForm(authForm)" />
        <svg id="eye-icon" class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" (click)="togglePasswordVisibility()">
          <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" />
          <circle cx="12" cy="12" r="3" />
          <line [class.strikethrough-line]="!passwordVisible" x1="3" y1="3" x2="21" y2="21" />
        </svg>
      </div>

      <div *ngIf="!isLogin" class="form-group">
        <label>Confirm Password</label>
        <input [type]="passwordVisible ? 'text' : 'password' " name="confirmPassword" ngModel required
          placeholder="••••••••" (change)="verifForm(authForm)" />

      </div>

      <div class="form-group recaptcha">
        <ngx-recaptcha2 #captchaElem [siteKey]="siteKey" name="recaptcha" ngModel required theme="dark">
        </ngx-recaptcha2>
      </div>
      <button type="submit" class="btn primary" [disabled]="authForm.invalid">
        {{ isLogin ? 'Login' : 'Sign Up' }}
      </button>
    </form>

    <div class="divider">
      <span>or</span>
    </div>
    <div id="g_id_onload" data-client_id="790150872237-e6q4slaj075hi18fjs24as5ha0vgvhmd.apps.googleusercontent.com"
      data-callback="handleGoogleCredentialResponse" data-auto_prompt="false">
    </div>

    <div class="g_id_signin" data-type="standard" data-size="large" data-theme="dark" data-text="sign_in_with"
      data-shape="rectangular" data-logo_alignment="left">
    </div>

    <p class="switch">
      {{ isLogin ? "Don't have an account?" : 'Already have an account?' }}
      <a (click)="toggleAuthMode();">
        {{ isLogin ? 'Sign up' : 'Login' }}
      </a>
    </p>
  </div>
</div>